<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment of module-17</title>
    
    <style>

        .container-us100{
            
            justify-content: center;
            display: flex;
                  
          }
    
          .row{
            margin-top: 34px;
            background: #fff;
            padding: 64px;
            margin-left: 30px;
            border-radius: 10px;
    
          }
           
          .label1{
    
            text-transform: uppercase;
            justify-content: center;
            display: flex;
          }

        span {
            color: rgb(10, 163, 112);
            font-weight: 900;
            font-size: large;
            }

        p{
            font-size: 15px;
            }

        h5{

            font-size: 14px;
            }
    
    
        </style>
</head>

<body style="background-color: #808080;">

    <div class="container-us100">

        <div class="row">

                <h2 class="label1">Assignment of module-17</h2> 
                <h2 class="label1">Query Builder in Laravel</h2>

              

            </code>
                </pre>

                    <code>
                            <p> <h2>Questions: 1 </h2>
                                
                                <h5>Explain what Laravel's query builder is and how it provides a simple and elegant way to interact with databases. </h5> 
                                <h5> <span>Answer: </span> </br>
                                    Query builder is a powerful feature that allows developers to interact with databases using a fluent and intuitive interface. 
                                    It provides a convenient and expressive way to build and execute database queries.
                                    The query builder in Laravel is designed to work with various database management systems, such as MySQL, PostgreSQL, SQLite, and SQL Server. 
                                    It abstracts the underlying database engine's specific syntax and provides a consistent API for querying and manipulating data.
                                </br>
                                    Laravel's query builder of benefits and some key features. </br>


                                 1. Fluent Interface: The query builder uses a method chaining syntax, allowing developers to construct queries in a readable and expressive manner.
                                    This makes the code more concise and easier to understand.</br></br>

                                 2. Query Building: With the query builder, you can construct complex SQL queries without having to write raw SQL statements.
                                    It provides methods for selecting columns, joining tables, applying filters and conditions, sorting results, and more.</br></br>

                                3.  Database Transactions: The query builder supports database transactions, allowing you to perform multiple database operations as a single atomic unit. 
                                    This ensures data integrity and consistency in your application.</br></br>
                                  
                                </h5>
                                
                            </p>
                    </code>
                    <code>
                        <p> <h2>Questions 2:</h2>
                            
                            <h5>Write the code to retrieve the "excerpt" and "description" columns from the "posts" table using Laravel's query builder. 
                                Store the result in the $posts variable. Print the $posts variable.
                                </h5> 
                            <h5> <span>Answer: </span> </br>
                                Using php artisan command:-   php artisan make:migration create_products_table --create=products </br></br>
                            


                                        use Illuminate\Support\Facades\DB;</br>

                                
                                        $posts = DB::table('posts')
                                            ->select('excerpt', 'description')
                                            ->get();

                                        print_r($posts);</br></br>



                                </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 3:</h2>
                        
                            <h5>Describe the purpose of the distinct() method in Laravel's query builder. How is it used in conjunction with the select() method? </h5> 
                            <h5> <span>Answer: </span> </br>
                                
                                The distinct() method can be used in conjunction with the select() method to specify which columns to consider when determining uniqueness. By default, if no columns are provided to the distinct() method, 
                                it will consider all columns selected in the select() method.</br></br>

                                Example:</br></br>



                                use Illuminate\Support\Facades\DB; </br>


                                    $uniqueNames = DB::table('users')
                                        ->select('name')
                                        ->distinct()
                                        ->get();


                                                        
                            </h5>
                        
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 4:</h2>
                        
                            <h5>Write the code to retrieve the first record from the "posts" table where the "id" is 2 using Laravel's query builder. Store the result in the $posts variable. Print the "description" column of the $posts variable.</h5> 
                            <h5> <span>Answer: </span> </br>


                                use Illuminate\Support\Facades\DB;</br></br>

                                
                                $posts = DB::table('posts')
                                    ->where('id', 2)
                                    ->first();
                                
                                if ($posts) {
                                    echo $posts->description;
                                } else {
                                    echo "No post found.";
                                }
                                

                                
                            </h5>
                        
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 5:</h2>
                        
                            <h5>Write the code to retrieve the "description" column from the "posts" table where the "id" is 2 using Laravel's query builder. Store the result in the $posts variable. Print the $posts variable. </h5> 
                            <h5> <span>Answer: </span> </br>


                                use Illuminate\Support\Facades\DB;</br></br>


                                    $posts = DB::table('posts')
                                        ->where('id', 2)
                                        ->value('description');

                                    echo $posts;

                                                                    

                                
                            </h5>
                        
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 6:</h2>
                        
                            <h5>Explain the difference between the first() and find() methods in Laravel's query builder. How are they used to retrieve single records?</h5> 
                            <h5> <span>Answer: </span> </br>


                                Explain: </br></br>
                                first() method is used to retrieve the first record that matches the query conditions. 
                                It returns an instance of the stdClass object representing the record. 
                                If no matching record is found, it returns null. </br></br>


                                use Illuminate\Support\Facades\DB;</br>


                                    $user = DB::table('users')
                                        ->first();

                                    if ($user) {
                                        // Access user properties
                                        echo $user->name;
                                    } else {
                                        echo "No user found.";
                                    }</br></br>

                                Explain: </br></br>
                                find() method is used to retrieve a record based on its primary key. It expects the primary key value as an argument and returns the matching record as an instance of the stdClass object.
                                If no matching record is found, it returns null. </br></br>

                                use Illuminate\Support\Facades\DB;</br>



                                    $user = DB::table('users')
                                        ->find(1);

                                    if ($user) {
                                        // Access user properties
                                        echo $user->name;
                                    } else {
                                        echo "User not found.";
                                    }

                               
                            </h5>
                        
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 7:</h2>
                        
                            <h5>Write the code to retrieve the "title" column from the "posts" table using Laravel's query builder. Store the result in the $posts variable. Print the $posts variable.</h5> 
                            <h5> <span>Answer: </span> </br>


                                use Illuminate\Support\Facades\DB;</br>

                                // ...
                                
                                $posts = DB::table('posts')
                                    ->select('title')
                                    ->get();
                                
                                print_r($posts);
                                
                                
                            </h5>
                        
                        </p>
                    </code>
                    

                    <code>
                        <p> <h2>Questions 8:</h2>
                            
                            <h5>Write the code to insert a new record into the "posts" table using Laravel's query builder. Set the "title" and "slug" columns to 'X', and the "excerpt" and "description" columns to 'excerpt' and 'description', respectively. Set the "is_published" column to true and the "min_to_read" column to 2. Print the result of the insert operation.</h5> 
                            <h5> <span>Answer: </span> </br>
                                
                                use Illuminate\Support\Facades\DB;</br>

                                
                                $result = DB::table('posts')
                                    ->insert([
                                        'title' => 'X',
                                        'slug' => 'X',
                                        'excerpt' => 'excerpt',
                                        'description' => 'description',
                                        'is_published' => true,
                                        'min_to_read' => 2
                                    ]);
                                
                                echo $result;</br>
                                


                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 9:</h2>
                            
                            <h5>Write the code to update the "excerpt" and "description" columns of the record with the "id" of 2 in the "posts" table using Laravel's query builder. Set the new values to 'Laravel 10'. Print the number of affected rows.</h5> 
                            <h5> <span>Answer: </span> </br>
                                
                                use Illuminate\Support\Facades\DB;</br>


                                    $affectedRows = DB::table('posts')
                                        ->where('id', 2)
                                        ->update([
                                            'excerpt' => 'Laravel 10',
                                            'description' => 'Laravel 10'
                                        ]);

                                    echo $affectedRows;

                                


                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 10:</h2>
                            
                            <h5>Write the code to delete the record with the "id" of 3 from the "posts" table using Laravel's query builder. Print the number of affected rows.</h5> 
                            <h5> <span>Answer: </span> </br>
                                
                                use Illuminate\Support\Facades\DB;</br>

                                    $affectedRows = DB::table('posts')
                                        ->where('id', 3)
                                        ->delete();

                                    echo $affectedRows;


                                


                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 11:</h2>
                            
                            <h5>Explain the purpose and usage of the aggregate methods count(), sum(), avg(), max(), and min() in Laravel's query builder. Provide an example of each.</h5> 
                            <h5> <span>Answer: </span> </br>
                                
                                Aggregate methods in Laravel's Query builder (count(), sum(), avg(), max(), and min()) are used to perform calculations on a specific column or set of columns in a database table.
                                They allow you to retrieve aggregated data such as the count of rows, the sum of column values, the average value, the maximum value, or the minimum value.
                                </br></br>
                                count() method is used to retrieve the total number of rows that match a specific condition or the total number of rows in a table.
                                It returns the count as an integer value.
                            </br></br>
                                use Illuminate\Support\Facades\DB;</br>


                                    $totalPosts = DB::table('posts')
                                        ->count();

                                    echo $totalPosts;</br></br>

                                sum() method is used to calculate the sum of values in a specific column. It returns the sum as a numeric value.</br></br>

                                use Illuminate\Support\Facades\DB;</br>

                                    $totalAmount = DB::table('orders')
                                        ->sum('amount');

                                    echo $totalAmount;</br></br>


                                avg() method is used to calculate the average value of a specific column. It returns the average as a numeric value.</br></br>


                                use Illuminate\Support\Facades\DB;</br>


                                    $averagePrice = DB::table('products')
                                        ->avg('price');

                                    echo $averagePrice;</br></br>

                                    max() method is used to retrieve the maximum value from a specific column. It returns the maximum value as a numeric or string value depending on the column type.</br></br>

                                    use Illuminate\Support\Facades\DB;</br>

                                        $maxQuantity = DB::table('inventory')
                                            ->max('quantity');

                                        echo $maxQuantity;</br></br>

                                    min() method is used to retrieve the minimum value from a specific column. It returns the minimum value as a numeric or string value depending on the column type.</br></br>

                                    use Illuminate\Support\Facades\DB;</br>


                                        $minPrice = DB::table('products')
                                            ->min('price');

                                        echo $minPrice;</br></br>

                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 12:</h2>
                            
                            <h5>Describe how the whereNot() method is used in Laravel's query builder. Provide an example of its usage.</h5> 
                            <h5> <span>Answer: </span> </br></br>
                                
                                Laravel's query builder, the whereNot() method is used to add a "where not" condition to the query. It allows you to retrieve records that do not meet a specific condition.
                                This method is useful when you want to exclude certain records based on a particular criteria.</br></br>


                                use Illuminate\Support\Facades\DB;</br>

                                    $users = DB::table('users')
                                        ->whereNot('status', 'active')
                                        ->get();

                                    foreach ($users as $user) {
                                        echo $user->name;
                                    }</br></br>

                                


                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 13:</h2>
                            
                            <h5>Explain the difference between the exists() and doesntExist() methods in Laravel's query builder. How are they used to check the existence of records?</h5> 
                            <h5> <span>Answer: </span> </br></br>
                                
                                Laravel's query builder, the exists() and doesntExist() methods are used to check the existence of records in a table. 
                                They provide a convenient way to determine whether a query retrieves any records or not. Here's an explanation of
                                 the difference between these methods and how they are used:</br></br>


                                 use Illuminate\Support\Facades\DB;</br></br>

                                 // ...
                                 
                                 $exists = DB::table('users')
                                     ->where('status', 'active')
                                     ->exists();
                                 
                                 if ($exists) {
                                     echo "Records exist.";
                                 } else {
                                     echo "No records found.";
                                 }</br></br>


                                 doesntExist() method is the opposite of exists(). It is used to check if no records exist that match a specific condition. It returns a boolean value indicating whether there are no matching records found.</br></br>

                                 use Illuminate\Support\Facades\DB;</br>

                                    $doesntExist = DB::table('users')
                                        ->where('status', 'active')
                                        ->doesntExist();

                                    if ($doesntExist) {
                                        echo "No records found.";
                                    } else {
                                        echo "Records exist.";
                                    }</br></br>

                                 
                                


                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 14:</h2>
                            
                            <h5>Write the code to retrieve records from the "posts" table where the "min_to_read" column is between 1 and 5 using Laravel's query builder. Store the result in the $posts variable. Print the $posts variable.</h5> 
                            <h5> <span>Answer: </span> </br></br>
                                
                                use Illuminate\Support\Facades\DB;</br>
                                                                    
                                    $posts = DB::table('posts')
                                        ->whereBetween('min_to_read', [1, 5])
                                        ->get();

                                    foreach ($posts as $post) {
                                        echo $post->title . ': ' . $post->min_to_read . ' minutes to read';
                                    }</br></br>

                                                        
                            </h5>
                            
                        </p>
                    </code>

                    <code>
                        <p> <h2>Questions 15:</h2>
                            
                            <h5>Write the code to increment the "min_to_read" column value of the record with the "id" of 3 in the "posts" table by 1 using Laravel's query builder. Print the number of affected rows.</h5> 
                            <h5> <span>Answer: </span> </br></br>
                                
                                use Illuminate\Support\Facades\DB;</br>

                                
                                $affectedRows = DB::table('posts')
                                    ->where('id', 3)
                                    ->increment('min_to_read', 1);
                                
                                echo $affectedRows;</br></br>
                                

                                                        
                            </h5>
                            
                        </p>
                    </code>
                    
                    
                    

                </pre>

            </code>

        </div>

    </div>

</body>

</html>